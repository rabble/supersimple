(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[201],{201:function(e,r,s){"use strict";s.d(r,{Z:function(){return h}});var i,t,o=s(5893),n=s(7294),a=s(1163),d=s(3700),l=s(9814);function c(e){let{formData:r,onChange:s,onNext:i}=e,t=""!==r.name.trim();return(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Basic Directory Information"}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t&&i()},children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["What is the name of your directory? ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"text",id:"name",value:r.name,onChange:e=>s("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Tech Companies Directory",required:!0})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Describe your directory"}),(0,o.jsx)("textarea",{id:"description",value:r.description,onChange:e=>s("description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., A directory of technology companies in the Bay Area",rows:3})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{htmlFor:"domain",className:"block text-sm font-medium text-gray-700 mb-1",children:"Domain or category"}),(0,o.jsx)("input",{type:"text",id:"domain",value:r.domain,onChange:e=>s("domain",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Technology, Healthcare, Education"})]}),(0,o.jsx)("div",{className:"flex justify-end",children:(0,o.jsx)("button",{type:"submit",disabled:!t,className:"px-4 py-2 rounded-md text-white ".concat(t?"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500":"bg-gray-400 cursor-not-allowed"),children:"Next"})})]})]})}function m(e){let{formData:r,onChange:s,onNext:i,onPrevious:t,isLoading:n}=e,a=""!==r.interviewAnswers.directoryType.trim();return(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Directory Schema Interview"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:"Answer these questions to help us generate a schema for your directory."}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a&&!n&&i()},children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsxs)("label",{htmlFor:"directoryType",className:"block text-sm font-medium text-gray-700 mb-1",children:["What type of entities will be listed in this directory? ",(0,o.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,o.jsx)("input",{type:"text",id:"directoryType",value:r.interviewAnswers.directoryType,onChange:e=>s("directoryType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Companies, Restaurants, Schools",required:!0})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"exampleOrganizations",className:"block text-sm font-medium text-gray-700 mb-1",children:"Can you provide some examples of entities that would be in this directory?"}),(0,o.jsx)("textarea",{id:"exampleOrganizations",value:r.interviewAnswers.exampleOrganizations,onChange:e=>s("exampleOrganizations",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Google, Apple, Microsoft",rows:2})]}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"requiredFields",className:"block text-sm font-medium text-gray-700 mb-1",children:"What information is required for each listing?"}),(0,o.jsx)("textarea",{id:"requiredFields",value:r.interviewAnswers.requiredFields,onChange:e=>s("requiredFields",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Name, Industry, Website",rows:3})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{htmlFor:"optionalFields",className:"block text-sm font-medium text-gray-700 mb-1",children:"What optional information would you like to include?"}),(0,o.jsx)("textarea",{id:"optionalFields",value:r.interviewAnswers.optionalFields,onChange:e=>s("optionalFields",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"e.g., Logo, Year Founded, Number of Employees",rows:3})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Previous"}),(0,o.jsx)("button",{type:"submit",disabled:!a||n,className:"px-4 py-2 rounded-md text-white ".concat(a&&!n?"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500":"bg-gray-400 cursor-not-allowed"),children:n?"Generating Schema...":"Generate Schema & Continue"})]})]})]})}function u(e){let{schema:r,onChange:s,onNext:i,onPrevious:t}=e,[a,d]=(0,n.useState)(null),[l,c]=(0,n.useState)(JSON.stringify(r,null,2)),m=e=>{c(e);try{let r=JSON.parse(e);s(r),d(null)}catch(e){d("Invalid JSON format")}};return(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Edit Directory Schema"}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:"Review and edit the generated schema below. This defines the structure of listings in your directory."}),(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("label",{htmlFor:"schema",className:"block text-sm font-medium text-gray-700 mb-1",children:"Schema (JSON)"}),(0,o.jsx)("textarea",{id:"schema",value:l,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border ".concat(a?"border-red-500":"border-gray-300"," rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 font-mono text-sm"),rows:15}),a&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:a})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Previous"}),(0,o.jsx)("button",{type:"button",onClick:i,disabled:!!a,className:"px-4 py-2 rounded-md text-white ".concat(a?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),children:"Next"})]})]})}function g(e){let{formData:r,onSubmit:s,onPrevious:i,isLoading:t}=e;return(0,o.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Review Directory"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"Please review your directory details before creating it."}),(0,o.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Directory Name"}),(0,o.jsx)("p",{className:"mt-1",children:r.name})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Description"}),(0,o.jsx)("p",{className:"mt-1",children:r.description||"None provided"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Domain/Category"}),(0,o.jsx)("p",{className:"mt-1",children:r.domain||"None provided"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Schema"}),(0,o.jsx)("pre",{className:"mt-1 p-3 bg-gray-50 rounded-md overflow-auto text-xs",children:JSON.stringify(r.schema,null,2)})]})]}),(0,o.jsxs)("div",{className:"flex justify-between",children:[(0,o.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Previous"}),(0,o.jsx)("button",{type:"button",onClick:s,disabled:t,className:"px-4 py-2 rounded-md text-white ".concat(t?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),children:t?"Creating Directory...":"Create Directory"})]})]})}function h(){let{user:e}=(0,d.a)(),r=(0,a.useRouter)(),[s,i]=(0,n.useState)(0),[t,h]=(0,n.useState)({name:"",description:"",domain:"",interviewAnswers:{directoryType:"",exampleOrganizations:"",requiredFields:"",optionalFields:""},schema:null}),[x,b]=(0,n.useState)(!1),[f,y]=(0,n.useState)(null),p=(e,r)=>{h(s=>({...s,[e]:r}))},N=(e,r)=>{h(s=>({...s,interviewAnswers:{...s.interviewAnswers,[e]:r}}))},j=e=>{h(r=>({...r,schema:e}))},v=async()=>{b(!0),y(null);try{let e=await fetch("/api/llm/schemaGeneration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,description:t.description,domain:t.domain,interviewAnswers:t.interviewAnswers})});if(!e.ok){let r=await e.json();throw Error(r.error||"Failed to generate schema")}let r=await e.json();j(r.schema),i(2)}catch(e){y(e.message||"An error occurred while generating the schema"),console.error("Schema generation error:",e)}finally{b(!1)}},w=async()=>{if(!e){y("You must be logged in to create a directory");return}b(!0),y(null);try{let{data:s,error:i}=await l.O.from("directories").insert({name:t.name,description:t.description,domain:t.domain,schema:t.schema,created_by:e.id}).select().single();if(i)throw Error(i.message||"Failed to save directory");r.push("/directories/".concat(s.id))}catch(e){y(e.message||"An error occurred while saving the directory"),console.error("Directory save error:",e)}finally{b(!1)}},C=()=>{1===s?v():3===s?w():i(e=>e+1)},I=()=>{i(e=>e-1)};return(0,o.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Create New Directory"}),(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("div",{className:"flex justify-between",children:["Basic Info","Interview","Schema Editor","Review"].map((e,r)=>(0,o.jsxs)("div",{className:"flex flex-col items-center ".concat(r<=s?"text-blue-600":"text-gray-400"),children:[(0,o.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mb-2 ".concat(r<s?"bg-blue-600 text-white":r===s?"border-2 border-blue-600 text-blue-600":"border-2 border-gray-300 text-gray-400"),children:r<s?"âœ“":r+1}),(0,o.jsx)("span",{className:"text-sm",children:e})]},r))}),(0,o.jsxs)("div",{className:"relative mt-2",children:[(0,o.jsx)("div",{className:"absolute top-0 left-0 h-1 bg-gray-200 w-full"}),(0,o.jsx)("div",{className:"absolute top-0 left-0 h-1 bg-blue-600 transition-all duration-300",style:{width:"".concat(s/3*100,"%")}})]})]}),f&&(0,o.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:(0,o.jsx)("p",{children:f})}),(()=>{switch(s){case 0:return(0,o.jsx)(c,{formData:t,onChange:p,onNext:C});case 1:return(0,o.jsx)(m,{formData:t,onChange:N,onNext:C,onPrevious:I,isLoading:x});case 2:return(0,o.jsx)(u,{schema:t.schema,onChange:j,onNext:C,onPrevious:I});case 3:return(0,o.jsx)(g,{formData:t,onSubmit:C,onPrevious:I,isLoading:x});default:return null}})()]})}(i=t||(t={}))[i.BASIC_INFO=0]="BASIC_INFO",i[i.INTERVIEW=1]="INTERVIEW",i[i.SCHEMA_EDITOR=2]="SCHEMA_EDITOR",i[i.REVIEW=3]="REVIEW"},9814:function(e,r,s){"use strict";s.d(r,{O:function(){return i}});let i=(0,s(6490).eI)("https://mzbodrwzhasiydvpvbid.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16Ym9kcnd6aGFzaXlkdnB2YmlkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA3MjA0NDAsImV4cCI6MjA1NjI5NjQ0MH0.4PtrUzyD5AUZzWqoWYpgMFlojhW2y9SH6-tPvahPxSo")},1163:function(e,r,s){e.exports=s(3079)}}]);